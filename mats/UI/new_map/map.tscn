[gd_scene load_steps=55 format=3 uid="uid://bi0tc3pn6sgha"]

[ext_resource type="Script" path="res://mats/UI/new_map/map.gd" id="1_3h318"]
[ext_resource type="Theme" uid="uid://de15vct77vcwe" path="res://mats/UI/UI.tres" id="1_gyvyj"]
[ext_resource type="Texture2D" uid="uid://df16ud3cfcbxw" path="res://mats/UI/new_map/imgs/map.png" id="3_e6gjm"]
[ext_resource type="PackedScene" uid="uid://bwst4slo578yk" path="res://mats/UI/new_map/place/place.tscn" id="3_k2fw6"]
[ext_resource type="Texture2D" uid="uid://c00wrjavopulm" path="res://mats/imgs/icons/skills/hp.png" id="4_tkcb6"]
[ext_resource type="Script" path="res://mats/statuses/scripts/status_template.gd" id="5_gf3tx"]
[ext_resource type="PackedScene" uid="uid://d2iylodnns5c3" path="res://mats/UI/new_map/place/place_item_panel.tscn" id="6_o66ik"]
[ext_resource type="Script" path="res://mats/statuses/scripts/ingame_status.gd" id="6_rde3b"]
[ext_resource type="Texture2D" uid="uid://bq5s0f6ckf87k" path="res://mats/imgs/icons/skills/att.png" id="7_5tpil"]
[ext_resource type="Script" path="res://mats/UI/new_map/actions/sub/summon_boss_data.gd" id="8_6rri8"]
[ext_resource type="Texture2D" uid="uid://r3ay7qpv6g4x" path="res://mats/imgs/icons/skills/rolls.png" id="8_si7vb"]
[ext_resource type="Script" path="res://mats/UI/new_map/actions/sub/summon_enemys_data.gd" id="9_l0upw"]
[ext_resource type="Script" path="res://mats/UI/new_map/actions/arena.gd" id="10_emt1y"]
[ext_resource type="Script" path="res://mats/UI/new_map/actions/shop/shop.gd" id="12_vtmdr"]
[ext_resource type="Resource" uid="uid://bcfdokfrcmlxu" path="res://mats/statuses/hp.tres" id="14_ho0hg"]
[ext_resource type="Resource" uid="uid://btrqjcsptp4ff" path="res://mats/statuses/def.tres" id="15_53xg0"]
[ext_resource type="Texture2D" uid="uid://f220t7uqarsa" path="res://mats/UI/imgs/panel.png" id="15_bd4u6"]
[ext_resource type="Resource" uid="uid://dboror3nrebko" path="res://mats/statuses/crit_dmg.tres" id="16_3ascn"]
[ext_resource type="Resource" uid="uid://dgyw2qyns3guo" path="res://mats/statuses/%crit_dmg.tres" id="17_1fanq"]
[ext_resource type="Resource" uid="uid://bquw0as0hpq63" path="res://mats/statuses/take.tres" id="18_gglgd"]
[ext_resource type="Resource" uid="uid://4t5s26aq3412" path="res://mats/statuses/stamina_regen.tres" id="19_cyscp"]
[ext_resource type="Resource" uid="uid://co5662aeufqag" path="res://mats/statuses/max_stamina.tres" id="20_ok0tt"]
[ext_resource type="Resource" uid="uid://b22qalhp36kal" path="res://mats/statuses/hp_regeneration.tres" id="21_vxaej"]
[ext_resource type="Resource" uid="uid://bhpfpv5atn5eg" path="res://mats/statuses/speed.tres" id="22_62275"]

[sub_resource type="Resource" id="Resource_gkpp6"]
script = ExtResource("5_gf3tx")
name = "CHP"
translation_name = ""
suffix = ""
image = ExtResource("4_tkcb6")

[sub_resource type="Resource" id="Resource_4hf1g"]
script = ExtResource("6_rde3b")
editable_status = SubResource("Resource_gkpp6")
value = 1.0

[sub_resource type="Resource" id="Resource_pf6fx"]
script = ExtResource("5_gf3tx")
name = "CDMG"
translation_name = ""
suffix = ""
image = ExtResource("7_5tpil")

[sub_resource type="Resource" id="Resource_nuuq7"]
script = ExtResource("6_rde3b")
editable_status = SubResource("Resource_pf6fx")
value = 0.1

[sub_resource type="Resource" id="Resource_oood7"]
script = ExtResource("8_6rri8")
name = "sk"
die = false
boss = "res://mats/enemys/b2/enemy.tscn"

[sub_resource type="Resource" id="Resource_uu4dg"]
script = ExtResource("9_l0upw")
name = ""
enemy = null
percent = 0.5

[sub_resource type="Resource" id="Resource_fe0l4"]
script = ExtResource("9_l0upw")
name = ""
enemy = null
percent = 0.5

[sub_resource type="Resource" id="Resource_xbfx6"]
script = ExtResource("10_emt1y")
enemys = Array[Resource("res://mats/UI/new_map/actions/sub/empty_entety_data.gd")]([SubResource("Resource_oood7"), SubResource("Resource_uu4dg"), SubResource("Resource_fe0l4")])
spawning = false
enemys_count_min = 1
enemys_count_max = 1
time_to_next_enemy_wave_min = 1
time_to_next_enemy_wave_max = 1

[sub_resource type="Resource" id="Resource_nfw7t"]
script = ExtResource("5_gf3tx")
name = "CHP"
translation_name = ""
suffix = ""
image = ExtResource("4_tkcb6")

[sub_resource type="Resource" id="Resource_fkgsc"]
script = ExtResource("6_rde3b")
editable_status = SubResource("Resource_nfw7t")
value = -1.0

[sub_resource type="Resource" id="Resource_0yfuu"]
script = ExtResource("5_gf3tx")
name = ""
translation_name = ""
suffix = ""
image = ExtResource("8_si7vb")

[sub_resource type="Resource" id="Resource_dsfkb"]
script = ExtResource("6_rde3b")
editable_status = SubResource("Resource_0yfuu")
value = 0.5

[sub_resource type="Resource" id="Resource_4k3sr"]
script = ExtResource("9_l0upw")
name = ""
enemy = null
percent = 0.5

[sub_resource type="Resource" id="Resource_2a6jt"]
script = ExtResource("9_l0upw")
name = ""
enemy = null
percent = 0.5

[sub_resource type="Resource" id="Resource_getgl"]
script = ExtResource("10_emt1y")
enemys = Array[Resource("res://mats/UI/new_map/actions/sub/empty_entety_data.gd")]([SubResource("Resource_4k3sr"), SubResource("Resource_2a6jt")])
spawning = true
enemys_count_min = 1
enemys_count_max = 1
time_to_next_enemy_wave_min = 1
time_to_next_enemy_wave_max = 1

[sub_resource type="Resource" id="Resource_bim0u"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("14_ho0hg")
value = -1.0

[sub_resource type="Resource" id="Resource_3ogom"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("15_53xg0")
value = 0.0

[sub_resource type="Resource" id="Resource_hbyun"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("16_3ascn")
value = 0.0

[sub_resource type="Resource" id="Resource_ywhdx"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("17_1fanq")
value = 0.0

[sub_resource type="Resource" id="Resource_4m35i"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("21_vxaej")
value = 0.0

[sub_resource type="Resource" id="Resource_a2neo"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("18_gglgd")
value = 1.0

[sub_resource type="Resource" id="Resource_h6g4g"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("19_cyscp")
value = 0.0

[sub_resource type="Resource" id="Resource_651ti"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("20_ok0tt")
value = 0.0

[sub_resource type="Resource" id="Resource_efnvl"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("21_vxaej")
value = 0.0

[sub_resource type="Resource" id="Resource_3w10r"]
script = ExtResource("6_rde3b")
editable_status = ExtResource("22_62275")
value = 0.0

[sub_resource type="Resource" id="Resource_rflif"]
script = ExtResource("12_vtmdr")
items = Array[Resource("res://mats/UI/new_map/actions/shop/items/item_data.gd")]([])
count_min = 4
count_max = 4
rarity = 0.0

[sub_resource type="Resource" id="Resource_5v3ii"]
script = ExtResource("8_6rri8")
name = ""
die = false
boss = null

[sub_resource type="Resource" id="Resource_u8od0"]
script = ExtResource("10_emt1y")
enemys = Array[Resource("res://mats/UI/new_map/actions/sub/empty_entety_data.gd")]([SubResource("Resource_5v3ii")])
spawning = true
enemys_count_min = 1
enemys_count_max = 1
time_to_next_enemy_wave_min = 1
time_to_next_enemy_wave_max = 1

[sub_resource type="Resource" id="Resource_dpojv"]
script = ExtResource("12_vtmdr")
items = Array[Resource("res://mats/UI/new_map/actions/shop/items/item_data.gd")]([])
count_min = 4
count_max = 4
rarity = 0.0

[sub_resource type="Resource" id="Resource_n2rxx"]
script = ExtResource("12_vtmdr")
items = Array[Resource("res://mats/UI/new_map/actions/shop/items/item_data.gd")]([])
count_min = 4
count_max = 4
rarity = 0.0

[node name="pause" type="Control" node_paths=PackedStringArray("current_pos")]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_gyvyj")
script = ExtResource("1_3h318")
current_pos = NodePath("map/cont/locs/map/place5")

[node name="map" type="TextureRect" parent="."]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -512.0
offset_bottom = -52.0
grow_horizontal = 0
grow_vertical = 2
theme = ExtResource("1_gyvyj")
texture = ExtResource("3_e6gjm")
expand_mode = 1
stretch_mode = 5

[node name="cont" type="Control" parent="map"]
clip_contents = true
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 16.0
offset_top = 8.0
offset_right = -12.0
offset_bottom = -12.0
grow_horizontal = 2
grow_vertical = 2

[node name="locs" type="Control" parent="map/cont"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="map" type="Control" parent="map/cont/locs"]
layout_mode = 2
anchors_preset = 0

[node name="place" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 48.0
offset_top = 192.0
offset_right = 64.0
offset_bottom = 208.0
level_time = 0.0
ingame_statuses = Array[ExtResource("6_rde3b")]([SubResource("Resource_4hf1g"), SubResource("Resource_nuuq7")])
neighbors = [NodePath("../place3")]
place_panel_node = NodePath("../../Panel")

[node name="place2" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 96.0
offset_top = 144.0
offset_right = 112.0
offset_bottom = 160.0
level_time = 0.0
neighbors = [NodePath("../place3"), NodePath("../place6"), NodePath("../place16"), NodePath("../place12")]
place_panel_node = NodePath("../../Panel")

[node name="place3" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 48.0
offset_top = 144.0
offset_right = 64.0
offset_bottom = 160.0
level_time = 15.0
neighbors = [NodePath("../place"), NodePath("../place4"), NodePath("../place2")]
place_panel_node = NodePath("../../Panel")

[node name="place4" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_top = 144.0
offset_bottom = 160.0
level = "res://mats/lvls/lvl1/lvl1_2.tscn"
arena = SubResource("Resource_xbfx6")
ingame_statuses = Array[ExtResource("6_rde3b")]([SubResource("Resource_fkgsc"), SubResource("Resource_dsfkb")])
neighbors = [NodePath("../place3"), NodePath("../place5")]
place_panel_node = NodePath("../../Panel")

[node name="place5" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_top = 96.0
offset_bottom = 112.0
level_time = 0.0
neighbors = [NodePath("../place4"), NodePath("../place8")]
place_panel_node = NodePath("../../Panel")

[node name="place6" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 48.0
offset_top = 96.0
offset_right = 64.0
offset_bottom = 112.0
level = "res://mats/lvls/lvl1/lvl1_2.tscn"
arena = SubResource("Resource_getgl")
ingame_statuses = Array[ExtResource("6_rde3b")]([SubResource("Resource_bim0u"), SubResource("Resource_3ogom"), SubResource("Resource_hbyun"), SubResource("Resource_ywhdx"), SubResource("Resource_4m35i")])
neighbors = [NodePath("../place10"), NodePath("../place9"), NodePath("../place2")]
place_panel_node = NodePath("../../Panel")

[node name="place7" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 96.0
offset_top = 96.0
offset_right = 112.0
offset_bottom = 112.0
level_time = 0.0
ingame_statuses = Array[ExtResource("6_rde3b")]([SubResource("Resource_a2neo"), SubResource("Resource_h6g4g"), SubResource("Resource_651ti"), SubResource("Resource_efnvl"), SubResource("Resource_3w10r")])
neighbors = [NodePath("../place10")]
place_panel_node = NodePath("../../Panel")

[node name="place8" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_top = 48.0
offset_bottom = 64.0
level_time = 0.0
shop = SubResource("Resource_rflif")
neighbors = [NodePath("../place5"), NodePath("../place9")]
place_panel_node = NodePath("../../Panel")

[node name="place9" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 48.0
offset_top = 48.0
offset_right = 64.0
offset_bottom = 64.0
level_time = 0.0
neighbors = [NodePath("../place8"), NodePath("../place6")]
place_panel_node = NodePath("../../Panel")

[node name="place10" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 96.0
offset_top = 48.0
offset_right = 112.0
offset_bottom = 64.0
level_time = 0.0
arena = SubResource("Resource_u8od0")
neighbors = [NodePath("../place6"), NodePath("../place11"), NodePath("../place7")]
place_panel_node = NodePath("../../Panel")

[node name="place11" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 144.0
offset_top = 48.0
offset_right = 160.0
offset_bottom = 64.0
level_time = 0.0
neighbors = [NodePath("../place12")]
place_panel_node = NodePath("../../Panel")

[node name="place12" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 144.0
offset_top = 96.0
offset_right = 160.0
offset_bottom = 112.0
level_time = 0.0
ingame_statuses = Array[ExtResource("6_rde3b")]([SubResource("Resource_4hf1g"), SubResource("Resource_nuuq7")])
neighbors = [NodePath("../place2"), NodePath("../place11"), NodePath("../place7")]
place_panel_node = NodePath("../../Panel")

[node name="place16" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 96.0
offset_top = 192.0
offset_right = 112.0
offset_bottom = 208.0
neighbors = [NodePath("../place2"), NodePath("../place17")]
place_panel_node = NodePath("../../Panel")

[node name="place17" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 144.0
offset_top = 192.0
offset_right = 160.0
offset_bottom = 208.0
neighbors = [NodePath("../place16"), NodePath("../place18"), NodePath("../place24")]
place_panel_node = NodePath("../../Panel")

[node name="place18" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 192.0
offset_top = 192.0
offset_right = 208.0
offset_bottom = 208.0
neighbors = [NodePath("../place22"), NodePath("../place17")]
place_panel_node = NodePath("../../Panel")

[node name="place19" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 240.0
offset_top = 192.0
offset_right = 256.0
offset_bottom = 208.0
neighbors = [NodePath("../place22")]
place_panel_node = NodePath("../../Panel")

[node name="place20" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 288.0
offset_top = 192.0
offset_right = 304.0
offset_bottom = 208.0
shop = SubResource("Resource_dpojv")
neighbors = [NodePath("../place19"), NodePath("../place21")]
place_panel_node = NodePath("../../Panel")

[node name="place21" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 288.0
offset_top = 144.0
offset_right = 304.0
offset_bottom = 160.0
neighbors = [NodePath("../place20")]
place_panel_node = NodePath("../../Panel")

[node name="place22" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 240.0
offset_top = 144.0
offset_right = 256.0
offset_bottom = 160.0
neighbors = [NodePath("../place21"), NodePath("../place18"), NodePath("../place23")]
place_panel_node = NodePath("../../Panel")

[node name="place23" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 192.0
offset_top = 144.0
offset_right = 208.0
offset_bottom = 160.0
neighbors = [NodePath("../place24"), NodePath("../place22")]
place_panel_node = NodePath("../../Panel")

[node name="place24" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 144.0
offset_top = 144.0
offset_right = 160.0
offset_bottom = 160.0
neighbors = [NodePath("../place25")]
place_panel_node = NodePath("../../Panel")

[node name="place25" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 192.0
offset_top = 96.0
offset_right = 208.0
offset_bottom = 112.0
shop = SubResource("Resource_n2rxx")
neighbors = [NodePath("../place24"), NodePath("../place26")]
place_panel_node = NodePath("../../Panel")
shop_color = Color(0.745098, 0.658824, 0, 1)

[node name="place26" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 240.0
offset_top = 96.0
offset_right = 256.0
offset_bottom = 112.0
neighbors = [NodePath("../place22"), NodePath("../place25"), NodePath("../place27")]
place_panel_node = NodePath("../../Panel")

[node name="place27" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 288.0
offset_top = 96.0
offset_right = 304.0
offset_bottom = 112.0
neighbors = [NodePath("../place28")]
place_panel_node = NodePath("../../Panel")

[node name="place28" parent="map/cont/locs/map" node_paths=PackedStringArray("neighbors", "place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 240.0
offset_top = 48.0
offset_right = 256.0
offset_bottom = 64.0
neighbors = [NodePath("../place27")]
place_panel_node = NodePath("../../Panel")

[node name="place14" parent="map/cont/locs/map" node_paths=PackedStringArray("place_panel_node") instance=ExtResource("3_k2fw6")]
offset_left = 192.0
offset_top = 48.0
offset_right = 208.0
offset_bottom = 64.0
secret = true
place_panel_node = NodePath("../../Panel")

[node name="Panel" parent="map/cont/locs" instance=ExtResource("6_o66ik")]
visible = false
z_index = 1
layout_mode = 2

[node name="stats" type="Panel" parent="."]
layout_mode = 0
offset_right = 128.0
offset_bottom = 320.0

[node name="cont" type="VBoxContainer" parent="stats"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 4.0
offset_top = 4.0
offset_right = -4.0
offset_bottom = -4.0
grow_horizontal = 2
grow_vertical = 2

[node name="ScrollContainer" type="ScrollContainer" parent="stats/cont"]
layout_mode = 2
size_flags_vertical = 3

[node name="item_cont" type="VBoxContainer" parent="stats/cont/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="back" type="Button" parent="stats/cont"]
layout_mode = 2
text = "BACK"

[node name="shop" type="TextureRect" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 128.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("15_bd4u6")

[node name="shop" type="GridContainer" parent="shop"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 13.0
offset_top = 17.0
offset_right = -257.0
offset_bottom = -159.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(2, 2)
theme_override_constants/h_separation = 1
theme_override_constants/v_separation = 1
columns = 4

[connection signal="in_shop" from="." to="." method="_on_in_shop"]
[connection signal="button_down" from="stats/cont/back" to="." method="_on_shop_exit_down"]
